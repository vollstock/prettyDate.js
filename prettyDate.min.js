var ONE_SECOND=1000;var ONE_MINUTE=60*ONE_SECOND;var ONE_HOUR=60*ONE_MINUTE;var ONE_DAY=24*ONE_HOUR;var ONE_YEAR=365*ONE_DAY;var SECONDS_PER_MINUTE=ONE_MINUTE/ONE_SECOND;var SECONDS_PER_HOUR=ONE_HOUR/ONE_SECOND;var MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"];var SHORT_MONTH_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var SHORT_DAY_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function prettyDate(date){var inputDate=new Date(date);if(isNaN(inputDate.getDate())){console.error("Can't parse date",date);return date}var currentDate=new Date();var difference=Math.abs(currentDate-inputDate);var secDiff=Math.floor(Math.abs(difference/1000));var currentDay=new Date(currentDate.getYear(),currentDate.getMonth(),currentDate.getDate());var inputDay=new Date(inputDate.getYear(),inputDate.getMonth(),inputDate.getDate());var dayDiff=Math.abs((currentDay-inputDay)/ONE_DAY);var isToday=(inputDate.getYear()==currentDate.getYear())&&(inputDate.getMonth()==currentDate.getMonth())&&(inputDate.getDay()==currentDate.getDay());var isThisYear=inputDate.getYear()==currentDate.getYear();var isFuture=currentDate<inputDate;if(!isFuture){if(difference<ONE_MINUTE){return "Just now";}else if(difference<ONE_HOUR){return createMinutesString(secDiff)+" ago";}else if(isToday&&difference<=5*ONE_HOUR){return createHoursString(secDiff)+" ago";}else if(isToday){return "Today "+createAmPmHour(inputDate);}else if(dayDiff==1){return "Yesterday "+createAmPmHour(inputDate);}else if(dayDiff<=7){return "Last "+createWeekDayAmPmHour(inputDate);}else if(isThisYear){return createDateString(inputDate);}else if(!isThisYear){return createDateString(inputDate)+" "+inputDate.getFullYear()}}else{if(difference<ONE_MINUTE){return "Just now";}else if(difference<ONE_HOUR){return "In "+createMinutesString(secDiff);}else if(isToday&&difference<=5*ONE_HOUR){return "In "+createHoursString(secDiff);}else if(isToday){return "Today "+createAmPmHour(inputDate);}else if(dayDiff==1){return "Tomorrow "+createAmPmHour(inputDate);}else if(dayDiff<=7){return "Next "+createWeekDayAmPmHour(inputDate);}else if(isThisYear){return createDateString(inputDate);}else if(!isThisYear){return createDateString(inputDate)+" "+inputDate.getFullYear()}}}function createAmPmHour(date){var hours=date.getHours();var minutes=date.getMinutes();var ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;minutes=minutes<10?'0'+minutes:minutes;return hours+':'+minutes+' '+ampm}function createWeekDayAmPmHour(date){return DAY_NAMES[date.getDay()]+" "+createAmPmHour(date)}function addOrdinal(num){switch(num%100){case 11:case 12:case 13:return num+"th"}switch(num%10){case 1:return num+"st";case 2:return num+"nd";case 3:return num+"rd";default:return num+"th"}}function createDateString(date){return SHORT_MONTH_NAMES[date.getMonth()]+" "+addOrdinal(date.getDate())}function createMinutesString(secDiff){return calcMinutesDiff(secDiff)+" minute"+pluralize(calcMinutesDiff(secDiff))}function createHoursString(secDiff){return calcHoursDiff(secDiff)+" hour"+pluralize(calcHoursDiff(secDiff))+", "+createMinutesString(secDiff)}function calcHoursDiff(secDiff){return Math.floor(secDiff/SECONDS_PER_HOUR)}function calcMinutesDiff(secDiff){return Math.floor(secDiff/SECONDS_PER_MINUTE)%60}function pluralize(bPlu){return bPlu==1?"":"s"}